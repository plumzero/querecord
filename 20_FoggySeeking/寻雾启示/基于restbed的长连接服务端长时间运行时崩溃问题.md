
## 内存问题
- 内存问题有很多，不过 C/C++ 中常见的问题只有两个: 数组越界和内存泄漏。数组越界可以通过设置哨兵或使用容器避免，内存泄漏可以通过一些工具如 `valgrind` 进行检测发现。这种问题应该都比较容易处理和发现。
- 还有一种，可能自己写程序时很少出现，但在一些开源实现中可能会因为一些不当的使用或实现本身逻辑产生内存问题。

## 问题说明
- restbed 客户端向 restbed 服务端大量发送 Http 长连接处理时，长时间运行时，服务端会因 Out Of Memory 导致崩溃。
- [了解OOM](https://www.cnblogs.com/duanxz/p/10185946.html)

## 原因分析
- 客户端与服务端进行长连接会话时，服务端会维持一个会话 Session, 随着客户端会服务端会话次数的增加，这个 Session 也会不断的加内存。这个没有办法通过 valgrind 的 leak-check 检测出来，因为程序会在退出(如 Ctrl+C)或连接释放时，该部分内存自动释放掉。

## 解决办法
- 服务端可以采取一定措施，如每处理一定数据长连接数，就释放一次该连接。

