
### 说明

与工厂模式不同，抽象工厂模式并不生产产品，只生产组成产品的零件。而组装产品则由用户完成。

一部电视剧的制作从开始到完成要经历很多个步骤，如剧本、服化道、拍摄、宣传、播映等等。对于一部电视剧，实力强大的香港的 TVB 可以完成上述整个过程，需要统筹各方，付出的精力也很多，但它产出的是一个完整的产品，所以这是一个工厂模式。不过现在电视剧的拍摄有专业的编剧人负责剧本、专门的影视制作公司负责制作、文化传播公司负责推广宣传，以及电视台负责播放。各环节相对独立却又各司其职，最后统筹成一部完整的产品。如果某个环境需要增加或修改功能，则只需要找相应的那个环节即可。

可以看出，抽象工厂模式更像是**生产&&组装工厂模式**，而原来的工厂模式更像是整体工厂模式。

生产一部收音机或电视机，很少会由一个工厂或一个地方单独完成了，往往是在世界各地生产不同的零件，之后再统一运往另一个地方组装，这很符合抽象工厂的特征。

### 实现

一台收音机由机械器件、电子器件、电气器件等构成，可以将它们定义为三个界面抽象类，在派生类中重写每个器件的属性或功能，之后交由一个工厂组装，负责组装的工厂也继承自一个相应的界面抽象类。

Mechanical, Electronic, Electrical 作为组成产品的三个零件，很明显，工厂应该享有对它们的控制权，所以在抽象工厂的派生类为定义了指向这三个零件的多态指针。

抽象工厂模式多在游戏编程中使用，构成游戏场面的零件，如树木，砖块等就可以通过抽象工厂实现，非常灵活与方便。不过在一般应用中，感觉还是工厂模块更多一些。

抽象工厂模式乍看复杂，所以示例简单，更易理解。

[示例程序](realize.cpp)

如果需要生产一部电视机，只要再从 Mechanical, Electronic 和 Electrical 派生关于电视机的相关零件类，以及派生自 Factory 的关于电视机的工厂类即可，扩展方便。

### 其他

抽象工厂模式可以比较方便的扩展工厂，但扩展零件工作量相对要更大一些。

### 相关的设计模式

Builder 模式
- Abstract Factory 模式通过调用抽象产品的接口(API)来组装抽象产品，生成具有复杂结构的实例。
- Builder 模式则是分阶段地制作复杂实例。

Factory Method 模式
- 有时 Abstract Factory 模式中零件和产品的生成会使用到 Factory Method 模式。

Composite 模式
- 有时 Abstract Factory 模式在制作产品时会使用 Composite 模式。

Singleton 模式
- 有时 Abstract Factory 模式中的具体工厂会使用 Singleton 模式。
