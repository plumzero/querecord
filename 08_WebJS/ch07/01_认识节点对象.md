
### DOM中的节点

在一个 HTML 文档中，DOM 将 HTML 的每一个元素都看作一个节点。

在 DOM 中，文档是由节点组成的，节点的类型主要包括三种，分别是`元素节点`、`属性节点`和`文本节点`。比如 `<table>` 标记为元素节点，里面可以包含其他元素或者文本内容，`<a href="">` 标记中的 `href` 为属性节点，而例如标题文字、单元格内容为文本节点，也称为"叶子节点"。

节点在文档中具有`父子节点`、`兄弟节点`的关系。在文档的树形层次结构中，一些节点处在另一些节点的上方，把位于上方的节点称为"父节点"，位于下方的节点称为"子节点"。

在 HTML 文档中，有起始标记和结束标记的标记都有子节点。元素的属性不认为是元素的子节点。

兄弟节点指一些节点属于同一个父节点，位于同一层次的子节点，称为兄弟节点。


### 节点对象的常用属性

- `childNodes` 属性

  在一棵节点树上，childNodes 属性可以用来获取任何一个元素的所有子元素，它是一个包含这个元素全部子元素的数组:
  ```js
    element.childNodes
  ```
  如，获取 body 元素的所有子元素:
  ```js
    var body_element = document.getElementsByTagName("body")[0];        // 每份文档只有一个 body 元素，所以位于第一个
    body_element.childNodes;            // 所有子元素
    body_element.childNodes.length;     // 子元素的个数
  ```

- `firstChild` 属性
  如果需要访问 childNodes 数组的第一个元素，可以写成 firstChild:
  ```js
    node.firstChild
  ```
  这完全等价于:
  ```js
    node.childNodes[0]
  ```

- `lastChild` 属性
  如果需要访问 childNodes 数组的最后一个元素，可以写成 lastChild:
  ```js
    node.lastChild
  ```
  这完全等价于:
  ```js
    node.childNodes[node.childNodes.length-1]
  ```

- nodeType 属性

  nodeType 表示属性的类型，不同的类型用不同的数值表示，包括元素节点、属性节点和文本节点三种，分别用数字 1、2、3 来表示。

- nodeValue 属性

  可以通过 `nodeValue` 属性来得到(和设置)一个节点的值:
  ```js
    node.nodeValue
  ```
  需要注意的是，在节点为属性节点时，nodeName 的值为属性的名称。例如 `<a href="www.libeio.com">` 中，`href` 属性节点的名称(nodeName)为"href"。

[文档的节点属性示例](t/01_Node.html)

其他属性与含义:
* `attributes`: 如果该节点是一个元素节点，则以 `NamedNodeMap` 形式返回该元素的属性
* `nextSibling`: 返回当前节点的兄弟的下一个节点。如果没有这样的节点，则返回 null
* `parentNode`: 返回当前节点的父节点。如果没有父节点，则为 null
* `previousSibling`: 返回紧挨当前节点、位于它之前的兄弟节点。如果没有这样的节点，则返回 null


### 节点对象的方法

- `createElement`: 创建一个元素节点。
  ```js
    var para = document.createElement("p");
  ```
  变量 para 现在包含着一个指向刚创建出来的那个 p 元素的引用。不过它还不是任何一棵 DOM 节点树的组成部分，只是游荡在 JavaScript 世界里的一个孤儿。它这种情况称为文档碎片(document fragment)，还无法显示在浏览器的窗口画面里。不过，它已经像任何其他的节点那样有了自己的 DOM 属性。

- `appendChild`: 子节点插入到父节点中。
  ```js
    parent.appendChild(child);
  ```

  [appendChild示例](t/01_appendChild.html)

- `createTextNode`: 创建一个文本节点。
  ```js
    var txt = document.createTextNode("Hello world");
  ```
  变量 txt 现在包含指向新创建的那个文本节点的引用。这个节点也是未被插入任何一个文档的节点树下。

- `insertBefore`: 把一个新元素插入到一个现有元素的前面。
  ```js
    parentElement.insertBefore(newElement, targetElement);
  ```
  newElement 为想插入的新元素，targetElement 为想把新元素插入到那个之前的目标元素，parentElement 为目标元素的父元素。

  [insertBefore示例](t/01_insertBefore.html)

- DOM 本身并未提供 `insertAfter` 方法，这里可以编写一个:
  ```js
    function insertAfter(newElement, targetElement) {
        var parent = targetElement.parentNode;
        if (parent.lastChild == targetElement) {
            parent.appendChild(newElement);
        } else {
            parent.insertBefore(newElement, targetElement.nextSibling);
        }
    }
  ```

- `insertData()`: 在一个现有的文本节点中插入一个字符串，其语法格式如下:
  ```js
    insertData(start, string);
  ```
  其中 `start` 为必要参数，指定开始插入字符的起始位置。默认值从 0 开始，必要参数。"string" 指定需要插入的字符串。

  [节点的insertData示例](t/01_insertData.html)

- `replaceChild()`: 用于替换节点列表中的一个节点，用新的子元素替换已有的子元素，其语法格式如下:
  ```js
    replaceChild(newChild, oldChild);
  ```
  `newChild` 为包含新子节点的对象。如果此参数为 null，则此旧节点会被移除而不会被取代。`oldChild` 为包含旧子结点的对象。如果替换成功，将返回替换的节点，如果替换失败，将返回 null 。

  [replaceChild示例](t/01_replaceChild.html)


- `removeChild()`: 删除节点。其语法格式如下:
  ```js
    removeChild(oldChild);
  ```
  `oldChild` 为一个包含要被移除的节点对象。

  [removeChild示例](t/01_removeChild.html)

