
主要针对 POD 类型和结构体进行测试。

针对系统默认页尺寸(4KB)与大页尺寸(2MB)，一些 vector 方法效率的比较。
vector 方法有许多，这里只进行元素修改的测试。

### POD

大页数量 512 个。

[测试程序](t/04_try_pod.cpp)

单位: 微秒

| 类型 | 缺省耗时   |  大页耗时 |
|:-----|:----------|:---------|
| bool | 2507/1757/2459 | 2668/2516/2421 |
| char | 3235/3416/1901 | 3372/3395/2265 |
| int  | 5187/4095/4046 | 2236/3911/3983 |
| long | 4311/4383/6015 | 4026/4217/3570 |
| double | 4395/3836/4450 | 3049/4424/3996 |

可以看到，随着类型尺寸的增加，大页内存优势初显。

### proto 结构

将大页数量提高到 2048 个。

效率没有提升。

### 小结

对于内存占用大(G级别)且程序局部访问性较差的程序，可以尝试采用大页内存优化。

笔者的测试程序中，数据结构是一个数组，虽然对数组元素随机访问修改，但因为内存占用小(<200M)，所以局部性不至于太差，这可能也是效率没有提升的主要原因。

[更多关于大页内存应用场景的说明](http://t.zoukankan.com/dongzhiquan-p-5043912.html)

