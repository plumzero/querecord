
### 利用缓存提高存取效率

随着技术的发展，内存容量变得越来越大，带宽(CPU访问内存带宽，或存储器总线带宽)也在增加(但是增加的幅度比处理器的吞吐量要小)，但延迟并没有减少，而是越来越大。

处理器吞吐量与内存吞吐量和延迟的差异越来越大，这称为内存墙。

现代处理器通过几种方式来减小这种差距实际产生的影响:

- 每次内存访问会读取周围的多个数据，因为这些数据随后极有可能会被用到，称为内存预取

- 采用容量小但更快的存储器(称为缓存)进行存储，如果访问的数据在缓存中，那么就无须去访问内存

- 支持向量访问和同时处理多个访问请求，通过大量并行访问来掩盖延迟


### 数据访问的局部性和缓存

局部性分为"时间局部性"和"空间局部性"。

时间局部性是指当前被访问的数据随后有可能再次被访问到。

空间局部性是指当前访问地址附近的地址可能随后被访问到。

现代处理器通过在内存和核心之间增加缓存以利用局部性增强程序性能，这样可以用远低于缓存的价格换取接近缓存的速度。


软件开发人员应该意识到，对于性能限制在内存/缓存上的程序来说，缓存能够显著增加程序的实际性能，因此要编写缓存友好的代码，同时在多核的条件下要注意避免伪共享问题导致的性能损失。
