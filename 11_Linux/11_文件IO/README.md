
## creat 函数
- `creat` 函数其实等同于 `int open(const char * pathname, O_WRONLY|O_CREAT|O_TRUNC, mode_t mode)`。
- 此外，使用带`O_TRUNC`参数的`open`函数将文件打开，并且截断为0，其实质是清空文件的所有内容。

## 文件偏移量
- 在Linux中，每个打开的文件都有一个与其相关联的**当前文件偏移量**（也叫文件指针），它通常是一个非负整数，用以度量从文件开始处计算的字节数。
- 通常，读、写操作都从当前文件偏移量处开始，并使偏移量增加所读写的字节数。

## stat fstat lstat 函数
- Linux使用了一个结构体stat来存放文件的相应属性，而`stat`、`fstat`和`lstat`函数用于获得文件的这个属性结构体。
- `stat`函数和`lstat`函数使用文件的路径作为参数来标识需要获取其属性的文件，而`fstat`函数使用文件对应的描述符来标识需要获取其属性的文件。

## utime 函数
- 文件的三个时间
  ```shell
    unsigned longst_atime;      // 最近一次访问文件时间
    unsigned longst_mtime;      // 最近的修改文件时间
    unsigned longst_ctime;      // 最近一次对文件状态进行修改的时间
  ```
- 可以利用`utime`函数来改变一个文件的访问时间和修改时间，但是没有函数可以改变文件的特性修改时间，因为inode是由系统来维护的。

## umask chmod fchmod 函数
- `umask`函数只能在文件创建时候确定文件的相应权限，如果需要修改一个已经存在文件的权限，用户可以使用`chmod`函数或者`fchmod`函数，前者可以对任何指定文件进行操作，而后者必须使用文件描述符对一个已经打开的文件进行操作。
- 在调用`chmod`函数或者`fchmod`函数的时候，进程的有效用户ID必须等于文件所有者的ID，或者该进程必须具有超级用户的权限。

## dup dup2 函数
- 每一个打开的文件所对应的文件描述符不是唯一的，同一个文件可能对应着多个文件描述符，而`dup`函数和`dup2`函数都可以用来复制文件描述符。
- 由`dup`返回的新文件描述符一定是当前可用文件描述符中的最小数值。用`dup2`则可以用`fd2`参数指定新描述符的数值。如果`fd2`已经打开，则先将其关闭。如若`fd`等于`fd2`，则`dup2`返回`fd2`，而不关闭它。
- 通常使用这两个系统调用来重定向一个已经打开的文件描述符。

## fcntl 函数
- `fcntl`函数提供了进一步管理低级文件描述符的各种手段，用它可以对已打开的文件描述符执行各种控制操作，包括修改打开文件的性质，复制文件描述符、操作文件锁等。

## mkdir 函数
- 对于目录来说，最少要设置一个执行权限位，以允许用户访问该目录中的文件。
- 这个新创建目录的用户ID被设置为调用进程的有效用户ID，其组ID则为父目录的组ID或者进程的有效组ID。在新建一个目录之后，`mkdir`将更新该目录的
`st_atime`、`st_ctime`和`st_mtime`，同时更新其父目录的`st_ctime`和`st_mtime`。

## chdir fchdir 函数
- 在Linux中，每个进程都有一个对应的工作目录，也就是常说的工作路径。
- 进程可以调用`chdir`函数或者`fchdir`函数来修改当前的工作目录。
- 调用`chdir`函数的进程必须有使用路径所有路径分量的执行权限，并且使用路径指定的路径长度不能超过`PATH_MAX`，其路径分量不能超过`NAME_MAX`。

## closedir 函数
- 在Linux系统中，对目录有访问权限的用户都可以对目录进行读操作，但是只有操作系统内核才有权限对目录进行写操作。
- 和文件操作相同，打开的目录在操作完成之后也必须进行关闭操作，此时可以调用`closedir`函数。

## 记录
- [查看文件大小](查看文件大小.md)