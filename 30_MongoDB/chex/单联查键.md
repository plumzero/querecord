
```sql
    CREATE TABLE orders
    (
        item            CHAR(16)        NOT NULL,
        price           REAL            NOT NULL,
        quantity        INTEGER         NOT NULL
    );
```

```sql
    INSERT INTO orders VALUES('almonds', 12, 2),('pecans', 20, 1);
```

```sql
    CREATE TABLE items
    (
        item        CHAR(16)    NOT NULL,
        description TEXT        NOT NULL,
        instock     INTEGER     NOT NULL
    );
```

```sql
    INSERT INTO items VALUES('almonds', 'almond clusters', 120),('bread', 'raisin and nut bread', 80),('pecans', 'candied pecans', 60);
```

```sql
    SELECT o.item, u.description, u.instock, o.price, o.quantity
        FROM orders AS o
            INNER JOIN items AS u
                ON o.item = u.item;
```
输出结果:
```sh
       item       |   description   | instock | price | quantity 
------------------+-----------------+---------+-------+----------
 almonds          | almond clusters |     120 |    12 |        2
 pecans           | candied pecans  |      60 |    20 |        1
(2 rows)
```

用 MongoDB 实现同样的效果:

```js
    db.orders.insert([
        { _id : 1, item : "almonds", price : 12, quantity : 2 },
        { _id : 2, item : "pecans", price : 20, quantity : 1 }
    ])
```

```js
    db.items.insert([
        { _id : 1, item : "almonds", description : "almond clusters", instock : 120 },
        { _id : 2, item : "bread", description : "raisin and nut bread", instock : 80 },
        { _id : 3, item : "pecans", description : "candied pecans", instock : 60 }
    ])
```

```js
    db.orders.aggregate([
        {
            $lookup: {
                from: "items",
                localField: "item",    // field in the orders collection
                foreignField: "item",  // field in the items collection
                as: "fromItems"
            }
        },
        {
            $replaceRoot: { newRoot: { $mergeObjects: [ { $arrayElemAt: [ "$fromItems", 0 ] }, "$$ROOT" ] } }   // 取数组索引为 0 的元素(事实上，数组中只有一个元素)
        },
        { $project: { fromItems: 0, _id: 0 } }
    ])
```
输出结果:
```sh
{ "item" : "almonds", "description" : "almond clusters", "instock" : 120, "price" : 12, "quantity" : 2 }
{ "item" : "pecans", "description" : "candied pecans", "instock" : 60, "price" : 20, "quantity" : 1 }
```
