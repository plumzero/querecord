
- [其他参考](https://docs.mongodb.com/v4.4/installation/)
- [社区版下载地址](https://www.mongodb.com/try/download/community?tck=docs_server)

### 环境与版本

- 安装/运行环境: Ubuntu 16.04.5
- mongo版本: 4.4.3
- 二进制安装包: mongodb-linux-x86_64-ubuntu1604-4.4.3.tgz

解压二进制安装包，进入 bin 目录下，有 4 个可执行文件如下:
```sh
    install_compass
    mongo
    mongod
    mongos
```
主要用到两个，分别是数据库服务器 mongod 和客户端 mongo 。

### 安装部署

将二进制包解压，重命名并安装。这里的安装路径为 `/usr/local/mongo`。

将必要环境变量写入到 `/etc/profile` 文件中:
```sh
    export MONGODB_HOME=/usr/local/mongo
    export PATH=$PATH:$MONGODB_HOME/bin
```
更新环境变量。

进入 `MONGODB_HOME` 路径下，创建 data 目录作为数据目录，创建 log 目录作为日志目录:
```sh
    # cd $MONGODB_HOME
    # mkdir data
    # mkdir log
```

创建 conf 目录，作为配置目录，在里面生成一个文件并写入一些参数:
```sh
    # cd $MONGODB_HOME
    # mkdir conf
    # touch conf/mongodb.conf
    # echo dbpath = $MONGODB_HOME/data >> conf/mongodb.conf
    # echo logpath = $MONGODB_HOME/log >> conf/mongodb.conf
    # echo bind_ip = 0.0.0.0 >> conf/mongodb.conf
    # echo port = 27017 >> conf/mongodb.conf
    # echo fork = true >> conf/mongodb.conf
```

现在后台启动:
```sh
    mongod -f /usr/local/mongo/conf/mongodb.conf
```

通过客户端访问:
```sh
    mongo
    MongoDB shell version v4.4.3
    connecting to: mongodb://127.0.0.1:27017/?compressors=disabled&gssapiServiceName=mongodb
    Implicit session: session { "id" : UUID("8c15ac89-b7f4-4333-9e6b-96c5bd0fb066") }
    MongoDB server version: 4.4.3
    Welcome to the MongoDB shell.
    For interactive help, type "help".
    For more comprehensive documentation, see
            https://docs.mongodb.com/
    Questions? Try the MongoDB Developer Community Forums
            https://community.mongodb.com
    ---
    The server generated these startup warnings when booting: 
            2021-12-09T16:55:37.804+08:00: Using the XFS filesystem is strongly recommended with the WiredTiger storage engine. See http://dochub.mongodb.org/core/prodnotes-filesystem
            2021-12-09T16:55:40.952+08:00: Access control is not enabled for the database. Read and write access to data and configuration is unrestricted
            2021-12-09T16:55:40.952+08:00: You are running this process as the root user, which is not recommended
            2021-12-09T16:55:40.952+08:00: This server is bound to localhost. Remote systems will be unable to connect to this server. Start the server with --bind_ip <address> to specify which IP addresses it should serve responses from, or with --bind_ip_all to bind to all interfaces. If this behavior is desired, start the server with --bind_ip 127.0.0.1 to disable this warning
            2021-12-09T16:55:40.955+08:00: You are running on a NUMA machine. We suggest launching mongod like this to avoid performance problems: numactl --interleave=all mongod [other options]
            2021-12-09T16:55:40.955+08:00: Soft rlimits too low
            2021-12-09T16:55:40.955+08:00:         currentValue: 1024
            2021-12-09T16:55:40.955+08:00:         recommendedMinimum: 64000
    ---
    ---
            Enable MongoDB's free cloud-based monitoring service, which will then receive and display
            metrics about your deployment (disk utilization, CPU, operation statistics, etc).

            The monitoring data will be available on a MongoDB website with a unique URL accessible to you
            and anyone you share the URL with. MongoDB may use this information to make product
            improvements and to suggest MongoDB products and deployment options to you.

            To enable free monitoring, run the following command: db.enableFreeMonitoring()
            To permanently disable this reminder, run the following command: db.disableFreeMonitoring()
    ---
    > 
```
