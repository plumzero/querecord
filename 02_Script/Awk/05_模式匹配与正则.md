
### 模式匹配
设定某个条件，只有当扫描记录满足该条件时才进行处理，这个过程就是**模式匹配**。
```shell
    awk -F: 'NF==7 { print $0; }' /etc/passwd       # 只打印字段数为 7 的记录
    awk -F: '$1=="root" { print $0; }' /etc/passwd  # 只打印用户名为 root 的记录
```
上面的模式匹配也称为**关系运算符模式匹配**。


### 正则模式匹配

将正则表达式作为条件进行扫描处理，这种匹配方式也称为**正则模式匹配**。

awk 支持扩展正则表达式，可以无拘束使用。

| 表达式 | 说明 |
|:-------|:-----|
| ^      | 以某字符串开始的行 |
| $      | 以某字符串结束的行 |
| \<     | 以某字符串开始的单词 |
| \>     | 以某字符串结束的单词 |
| .      | 任意单个字符 |
| *      | >=0, 贪婪匹配 |
| +      | >=1 |
| ?      | |
| []     | |
| [^]    | |
| ()     | 子表达式组合，如 /(rool)+/, 表示一个或多个 rool 的组合 |
| |      | |
| \      | 转义字符 |
| x{m}   | 匹配重复 m 次的 x |
| x{m,}  | 匹配重复 m 次以上(包括 m 次)的 x，如 /\(root\)\{2,\}/ |
| x{m, n}| 匹配重复至少 m 次，至多 n 次的 x，使用这个时 awk 需要指定 -posix 或 --re-interval 参数 |

与格式化打印结合使用示例:
```shell
    awk -F: 'BEGIN{ printf("%-10s%-10s\n", "用户名", "用户ID"); } /^root/{ printf("%-10s%-10s\n", $1, $3); }' /etc/passwd
```
找出使用 `/bin/bash` 作为登录 shell 的用户(注意字符转义):
```shell
    awk '/\/bin\/bash$/{ print $0; }' /etc/passwd
```

关系运算符模式可以通过运算符 `~` 或 `!~` 与正则模式配合使用。其含义可以理解为 == 或 !=, 示例如下:
```shell
    awk -F: '$NF ~ /^\/bin\/bash$/{ print $0; }' /etc/passwd    # 打印最后一个字段内容为 "/bin/bash" 的行
```
