

## 参考
- 深入理解计算机操作系统 网络编程部分 速记

## 网络 I/O 设备与网络
- 一个插入到 I/O 总线扩展槽的适配器提供了到网络的物理接口。从网络上接收到的数据从适配器经过 I/O 和存储器总线拷贝到存储器，典型地是通过DMA传送。相似地，数据也能从存储器拷贝到网络。
- 常用的适配器为以太网适配器。每个以太网适配器都有一个全球唯一性地址，主机将帧(frame)发送到该网段内的其他任何主机，该帧的头部包含有该帧要去往的目的地址。所以虽然每个主机适配器都能看到这个帧，但只有目的主机能读到它。
- 通过网桥和电缆，多个以太网可以连接成较大的局域网，称为**桥接以太网**。在一个桥接以太网里，一些电缆连接网桥与网桥，一些连接网桥与集线器。这些电缆的带宽可以是不同的。
- 多个不兼容的局域网可以通过路由器连接起来，组成互联网络。

## 在连接中 EOF 意味着什么
- EOF 的打印值为 0
- EOF 是由内核检测到的一种条件。在调用 `read` 函数时可能会出现这种情况，出现这种情况的场景有以下两种:
    + 对端关闭，此时仍继续读，会出现 EOF
    + 对端字节发送完毕，且本端也已全部读取完毕，如果仍继续读，会出现 EOF
    
## Web 服务器
- 协议: http
- Web 内容
    + Web 服务器以两种不同的方式向客户端提供内容:
        + 取一个磁盘文件，并将其内容返回给客户端，这是**静态内容**。
        + 运行一个可执行文件，并将其输出返回给客户端，其输出称为**动态内容**。
- URL: 每条由 Web 服务器返回的内容都是和它管理的某个文件相关联的。这些文件中的每一个都有一个唯一的名字，称为URL。

## 服务的动态内容与CGI
- 服务器向客户端提供动态内容需要解决以下问题:

1. 客户端如何将程序参数传递给服务器

    GET 请求的参数在 URI 中传递，POST 请求的参数在包体中传递。

2. 服务器如何将参数传递给子进程
    
    在服务器接收如下一个请求后
      ```shell
        GET /cgi-bin/adder?15000&213 HTTP/1.1
      ```
    它调用 fork 来创建一个子进程，并调用 execue 在子进程上下文中执行 `/cgi-bin/adder` 程序。像 adder 这样的程序，常常称为 CGI 程序。在调用 execue 之前，子进程将 CGI 环境变量 QUERY_STRING 设置为 "15000&123", adder 程序在运行时可以用 Linux/Unix getenv 函数调用它。

3. 服务器如何将其他信息传递给子进程
    
    CGI 定义了大量的其他环境变，一个CGI程序在它运行时可以设置这些环境变量。
    
4. 子进程将它的输出发送到哪里
    
    一个 CGI 程序将它的动态内容发送到标准输出。在子进程加载并运行 CGI 程序之前，它使用 Linux/Unix dup2 将标准输出重定向到和客户端相关联的已连接描述符中。因此，任何CGI程序写到标准输出的东西都会直接到达客户端。
    注意，因为父进程不知道子进程生成的内容的类型或大小，所以子进程就要负责生成 `Content-type` 和 `Content-length` 响应报头，以及终止报头的空行。