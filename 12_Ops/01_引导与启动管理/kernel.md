
## 什么是内核
现代操作系统设计中，为减少系统本身的开销，往往将一些与硬件紧密相关的(如中断处理
程序、设备驱动程序等)、基本的、公共的、运行频率较高的模块(如时钟管理、进程调度
等)以及关键性数据结构独立出来，使之常驻内存，并对它们进行保护。通常把这一部分称
为操作系统的内核。

## 内核组件
- 在 Linux 系统中，内核组件由内核镜像文件、内核模块、 initrd 镜像文件三部分组成。
- 内核镜像文件
    + 内核镜像文件一般都是存储在 /boot 目录下，以类似 vmlinuz-3.10.0-862.el7.x86_64
    的方法命名，其中 3.10.0-862.el7.x86_64 是内核版本号，可通过 uname -r 查看；
    + 启动 Linux 系统时，GRUB 会将内核镜像文件直接加载到内存，以启动内核和整个系统；
- 内核模块
    + 内核模块位于 /lib/modules/3.10.0-862.el7.x86_64 目录下，可以通过下列命令查看:
        echo /lib/modules/$(uname -r)
    + Linux 内核的功能可以编译到内核镜像文件中，也可以单独成为内核模块；
    + Linux 系统可以在运行过程中动态地加载或者卸载内核模块，以修改系统功能；
    + /lib 存储在根文件系统中，需要挂载该系统后才能使用内核模块。
- initrd 镜像文件
    + 实际上，Linux 在启动过程中，必须等启动完内核以后，才会去挂载根文件系统；
    + Linux 系统把部分模块(如可以挂载根文件系统的模块)制作成 initrd 镜像文件；
    + 启动内核时，先把 initrd 镜像加载到内存，以加载外置设备模块，再通过这些模块驱动
    外置设备。
    + initrd 镜像文件位于 /boot 目录下，类似于下:
        /boot/initramfs-3.10.0-862.el7.x86_64.img

## 管道内核模块
- 在 Linux 系统中， /lib/modules/$(uname -r)/kernel 目录是内核模块的存储位置。
- 该目录包含的子目录存储有不同类型的内核模块:
    + arch      与硬件平台有关的模块
    + crypto    Linux 内核提供的加密算法模块
    + drivers   硬件设备的驱动程序
    + fs        与文件系统有关的模块
    + lib       各种模块所需的链接库
    + net       与网络有关的模块
    + sound     声卡驱动程序目录
    + kernel    内核有关的模块
- 内核模块文件是一个可执行文件，它的扩展名是 ".ko"。
- 关于模块的命令
        lsmod           # 显示当前加载到内核中的模块
        modinfo         # 查看模块相关信息
        insmod          # 安装某模块
        rmmod           # 卸载某模块
        modprobe        # 不常用