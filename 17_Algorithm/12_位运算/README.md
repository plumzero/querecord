
### 整型二进制补码

正数、0 的补码等于原码。
负数的补码计算方式: 将负数取绝对值后进行二进制表示，然后按拉取反，最后加 1 。

根据负数补码的结果倒推就可以得到原始负数。例如 char 类型计算 127 + 1，使用补码运算:
```s
    0111 1111
  + 0000 0001
  = 1000 0000
```
`1000 0000` 是补码运算后的结果，对这个结果减 1 得到 `0111 1111`，再按位取反得到 `1000 0000`，这个结果也是原始负数的绝对值，也就是 128。最后加个负号，就得到了原始负数 -128 。

### 概念

位图: bitmap

### 一些位运算的技巧

1. 常用的等式
```s
    -n = ~(n-1) = ~n+1
```

2. 获取整数 n 的二进制中最后一个 1
```s
    n & (-n) 或者 n & ~(n-1)
```
例如: n=010100，则 -n=101100, n&(-n)=000100

3. 去掉整数 n 的二进制中最后一个 1
```s
    n & (n-1)
```
如 n=010100, n-1=010011, n&(n-1)=010000

用途: 统计一个整数在二进制表示时 1 的数量、判断一个整数是不是 2 的幂、快速幂运算等。

4. 使用位运算代替整数的乘除运算
```s
    (x / 2) == (x >> 1)
    (x mod 2) == (x & 0x1)
```

5. 对二进制中的第 n 位进行操作

在比特字节中，n 从右向左，依次为 0, 1, 2, 3, ...

判断第 n 位是否为 1:
```s
    x & (1 << n)
```

将第 n 位设置为 1:
```s
    x | (1 << n)
```

将第 n 位设置为 0:
```s
    x | ~(1 << n)
```

将第 n 位取反(开关第 n 位):
```s
    x ^ (1 << n)
```

把从右往左数，第一个 1 的右边位全部变成 1:
```s
    x | (x - 1)
```

把从右往左数，第一个出现的 0 变成 1:
```s
    x | (x + 1)
```
