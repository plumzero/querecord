
### 监控分级

一个监控系统应该只有三类输出:
- 紧急警报: 需要立即执行处理
- 工单: 应该执行，但并非立即
- 日志: 不时之需

### 监控指标

监控系统的 4 个黄金指标。如果我们只能监控用户可见系统的指标，那么就应该监控这 4 个:
- 延迟: 服务处理某个请求所需要的时间。这里要区分成功请求和失败请求。
- 流量: 使用系统中的某个高层次的指标针对系统负载需求所进行的度量。对 Web 服务器来说，该指标通常是每秒 HTTP 请求数量，同时可能按请求类型分类(静态请求与动态请求)。
- 错误: 请求失败的速率，要么是显式失败(例如错误码返回)，要么是隐式失败(例如返回内容不合要求)，或者策略原因导致的失败(例如未在规定时间内返回)。不同的错误，其监控方式也不一样: 在负载均衡器上检测 HTTP 500 请求可能足够抓住所有的完全失败的请求，但是只有端到端的系统才能检测到返回错误内容这种故障类型。
- 饱和度: 服务容量有多"满"。通常是系统中目前最为受限的某种资源的某个具体指标的度量。(在内存受限的系统中，即为内存；在I/O受限的系统中，即为I/O)。这里要注意，很多系统在达到 100% 利用率之前性能会严重下降，所以增加一个利用率目标也是很重要的。
