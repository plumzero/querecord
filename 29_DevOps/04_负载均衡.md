
### 用户侧负载均衡

用户流量负载均衡(traffic load balancing)系统是用来决定数据中心中的这些机器中哪一个用来处理某个请求的。

理想情况下，用户流量应该最优地分布于多条网络链路上、多个数据中心中，以及多台服务器上。这里的'最优'依赖于下列几个因素:
- 逻辑层级(是在全局还是在局部)
- 技术层面(硬件层面与软件层面)
- 用户流量的天然属性

以两个常见的用户流量场景为例: 一个简单的搜索请求和一个视频上传请求。
用户想要很快地获取搜索结果，所以对搜索请求来说最重要的变量是延迟(latency)。而对于视频上传请求来说，用户已经预期该请求将要花费一定的时间，但是同时希望该请求能够一次成功，所以这里最重要的变量是吞吐量(throughput)。两种请求用户的需求不同，是我们在`全局`层面决定"最优"分配方案的重要条件。
- 搜索请求将会被发往最近的、可用的数据中心 —— 评价条件是数据包往返时间(RTT)，因为我们想要最小化该请求的延迟。
- 视频上传流将会采取另外一条路径 —— 也许是一条目前带宽没有占满的链路 —— 来最大化吞吐量，同时也许会牺牲一定程度的延迟。
但是在`局部`层面，在一个数据中心内部，我们经常假设同一个物理建筑物内的所有物理服务器都在同一个网络中，对用户来说都是等距的。因此在这个层面上的"最优"分配往往关注于优化资源的利用率，避免某个服务器负载过高。

负载均衡，尤其是大型系统的负载均衡，是非常复杂和非常动态化的。在现实中，很多其他因素也都在"最优"方案的考虑范围之内: 有些请求可能会被指派到某个稍远一点的数据中心，以保障该数据中心的缓存处于有效状态。或者某些非交互式请求会被发往另外一个地理区域，以避免网络拥塞。

用户侧负载均衡可以考虑的解决方案有:
- DNS
- 虚拟 IP

### 数据侧负载均衡
