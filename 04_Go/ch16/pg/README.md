

参考: [ORM实例教程](https://www.ruanyifeng.com/blog/2019/02/orm-tutorial.html)

ORM (对象映射模型)适用于 MySQL/PostgreSQL/SQLite 等支持标准 SQL 语法的关系型数据库以及 Mongo 等类 SQL 语法的非关系型数据库。

对 ORM 的学习主要包含三个方面: 映射、CRUD和关系(就这样说吧)。

### 映射

具体为:
- 数据库表(table) -> 类(class)
- 记录(record) -> 对象(object)
- 字段(field) -> 对象的属性(attribute)

### CRUD

略

### 关系

该部分仅适用于查询操作。可以理解为多个数据库之间的内外联查，通过一些关键字段(has-one/has-many/many-to-many等)定义是何种联查。

关系部分比预想的功能要弱一些(本来以为通过结构体对象可以实现对多个数据库中数据的同时修改)。不过即便这样，ORM 依旧强大。

优点如下:
1. 实现程序与库表的分离。比如程序的测试可以不再依赖于数据库。(当然了，程序员此时应该有这种意识: 自己所定义的结构体应该是表的一个映射，至于如何构造这种映射，需要对 ORM 的关系机制有所认识)
2. 实现从面向数据库编程到面向对象编程的转变。将库表映射为对象之后，程序员就可以单纯地去操作这个对象，而不用再考虑表数据方面的问题。
3. 可以减少对结构体字段的定义。比如 A B C D 四个表两两进行联查，其查询结果至少需要再定义 6 个结构体存放，但是使用了 ORM 操作关系之后，不需要另外再定义其他的结构体。

可以这样认为: 多表联查 + 结构化数据 = ORM 关系

### 对示例程序的说明

- 在示例程序中，标 ★ 处值得关注并理解。
- 主表/副表: 主表不一定重要，副表不一定不重要。二者可以相互转化，只是具体情形下看待角度不同。
- 联结键/联结条件/联结查询条件: 意义等同。
- 了解 ORM 未必能够很快地或者很完善的定义多个结构体对象之间复杂的关系，但对于简单关系则已足够。而复杂的关系，第三方 ORM 实现多有示例，对 ORM 的了解，有助于理解这些示例，从而依样画葫芦。

### 示例程序

示例程序中有更详细的注释说明。

- [has-one示例](has_one.go)
- [belongs-to示例](belongs_to.go)
- [has-many示例](has_many.go)
- [many-to-many示例](many2many.go)
