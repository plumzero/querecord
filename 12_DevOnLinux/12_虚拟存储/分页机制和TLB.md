
由于从虚拟地址到物理地址的转换非常耗时，处理器和操作系统主要使用了两个优化来减少转换次数: 分页机制和 TLB 。


### 分页机制

虚拟存储器和物理存储器被划分为大小相等的页，虚拟存储器和物理存储器之间的每次交换都以页为单位，通常页大小为 4KB、64KB或4MB(Linux 下页的默认大小为 4KB)，这远大于缓存线的大小。处理器通过每次载入一页的方式(相当于一次转换可以完成一页而不是一个数据)来减少载入单位数据时从虚拟地址到物理地址转换的消耗。


### TLB

TLB 用于缓存已经翻译的虚拟地址，通过利用访问页的局部性来减少翻译次数。TLB 也存在缓存不命中，所以在一些硬件上，缓存层次中也使用多层次 TLB 来减少内存地址翻译代价。

解决程序中 TLB 不命中而导致的性能问题的方法主要有以下几个:

增加页的大小。比如换成大页如 64KB，甚至 2M 。

对于重复多次使用且局部性很好的多维数据，临时分配数据空间来保存数据的一部分，然后重复使用该临时数据空间，此时 TLB 只需要保存这一部分临时数据空间的地址即可。

对数据进行分块优化。如果数据被多次使用，只是由于其大小超过 TLB 能够缓存的范围，即满不命中。此时可将数据分块，操作完一块后接着操作另一块。