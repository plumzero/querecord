
希望增大触发样式转换器折叠或扩展的可单击区域。这里将事件处理程序从标签移至包含它的 `<div>` 元素:
```js
    $(document).ready(function() {
        $('#switcher').click(function() {
            $('#switcher button').toggleClass('hidden');
        });
    });
```

但会造成一个问题，即单击按钮会在修改内容区的样式之后折叠样式转换器，导致这个问题的原因就是事件冒泡。

要解决这个问题，必须访问`事件对象`。事件对象是一种 DOM 结构，它会在元素获得处理事件的机会时传递给被调用的事件处理程序。这个对象中包含着与事件有关的信息(例如事件发生时的鼠标指针位置)，也提供了可以用来影响事件在 DOM 中传递进程的一些方法。

### 事件目标

`event` 保存着事件对象，而 `event.target` 属性保存着发生事件的目标元素:
```js
    $(document).ready(function() {
        $('#switcher').click(function(event) {
            if (event.target == this) {
                $('#switcher button').toggleClass('hidden');
            }
        });
    });
```

### 停止事件传播

事件对象还提供了一个 `.stopPropagation()` 方法，该方法可以完全阻止事件冒泡。

```js
    $(document).ready(function() {
        $('#switcher').click(function(event) {
            $('#switcher button').toggleClass('hidden');
        });
    });
    $('#switcher button').click(function(event) {
        var bodyClass = this.id.split('-')[1];
        $('body').removeClass().addClass(bodyClass);
        $('#switcher button').removeClass('selected');
        $(this).addClass('selected');
        event.stopPropagation();
    });
```

### 阻塞默认操作

如果我们把单击事件处理程序注册到锚元素(`<a>`)，而不是外层的 `<div>` 上，那么就要面对另外一个问题: 当用户单击链接时，浏览器会加载一个新页面。这种行为与我们讨论的`事件处理程序`不是同一个概念，它是单击锚元素的`默认操作`。类似地，当用户在编辑完表单后按下回车键时，会触发表单的 `submit` 事件，在此事件发生后，表单提交才会真正发生。

即便在事件对象上调用 `.stopPropagation()` 方法也不能禁止这种默认操作，因为默认操作不是在正常的事件传播流中发生的。在这种情况下，`preventDefault()` 方法则可以在触发默认操作之前终止事件。

事件传播和默认操作是相互独立的两套机制，在二者任何一方发生时，都可以终止另一方。如果想要同时停止事件传播和默认操作，可以在事件处理程序中返回 `false`，这是对在事件对象上同时调用 `.stopPropagation()` 和 `.preventDefault()` 的一种简写方式。

### 事件委托

事件委托是利用冒泡的一项高级技术。通过事件委托，可以借助一个元素上的事件处理程序完成很多工作。

对于大量子元素的同质化处理，可以只在 DOM 中的一个祖先元素上指定一个单击处理程序。由于事件会冒泡，未遭拦截的单击事件最终会到达这个祖先元素，而我们可以在此时再作出相应处理。

```js
    $(document).ready(function() {
        $('#switcher').click(function(event) {
            if ($(event.target).is('button')) {
                var bodyClass = event.target.id.split('-')[1];
                $('body').removeClass().addClass(bodyClass);
                $('#switcher button').removeClass('selected');
                $(event.target).addClass('selected');
                event.stopPropagation();
            }
        });
    });
```
`.is()` 方法接收一个选择符表达式，然后用选择符来测试当前的 jQuery 对象。如果集合中至少有一个元素与选择符匹配，`.is()` 返回 true 。

> `.is()` 与 `.hasClass()`
>   要测试元素是否包含某个类，也可以使用另一个简写方法 `.hasClass()`。不过，`.is()` 方法则更灵活一些，它可以测试任何选择符表达式。

不过这样一来，当按钮被单击时，转换器会折叠起来。这是因为用于切换转换器可见性的处理程序，现在被绑定到了按钮上面。因此，阻止事件冒泡不会影响切换发生。

进行处理:
```js
    $(document).ready(function() {
        $('#switcher').click(function(event) {
            if (! $(event.target).is('button')) {
                $('#switcher button').toggleClass('hidden');
            }
        });
    });
```

合并:
```js
    $(document).ready(function() {
        $('#switcher').click(function(event) {
            if ($(event.target).is('button')) {
                var bodyClass = event.target.id.split('-')[1];
                $('body').removeClass().addClass(bodyClass);
                $('#switcher button').removeClass('selected');
                $(event.target).addClass('selected');
                event.stopPropagation();
            } else {
                $('#switcher button').toggleClass('hidden');
            }
        });
    });
```
